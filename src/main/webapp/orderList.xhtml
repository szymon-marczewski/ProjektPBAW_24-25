<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
	<meta charset="utf-8" />
	<title>Projekt bazodanowy</title>
</h:head>
<h:body style="background-color: #eee; margin: 0.5em;">
	
	<h:form id="form-table2" style="margin-bottom:1em;">
			
	<p:commandButton value="Menu"
			action="productList?faces-redirect=true" style= "margin-right: auto;" />
	</h:form>

	<h1>Your orders</h1>

	<h:form id="form-table" style="margin-bottom:1em;">

	<p:dataTable value="#{orderListBB.list}" var="p">
        <p:column>
            <f:facet name="header">
                <h:outputText value="idOrder" />
            </f:facet>
            <h:outputText value="#{p[0]}" />
        </p:column>
        
        <p:column>
            <f:facet name="header">
                <h:outputText value="Date" />
            </f:facet>
            <h:outputText value="#{p[1]}" />
        </p:column>
            
        <p:column>
            <f:facet name="header">
                <h:outputText value="Manufacturer" />
            </f:facet>
            <h:outputText value="#{p[3]}" />
        </p:column>
            
        <p:column>
            <f:facet name="header">
                <h:outputText value="Model" />
            </f:facet>
            <h:outputText value="#{p[4]}" />
        </p:column>
            
        <p:column>
            <f:facet name="header">
                <h:outputText value="Total price" />
            </f:facet>
            <h:outputText value="#{p[5]}" />
        </p:column>
            
        <p:column>
            <f:facet name="header">
                <h:outputText value="Amount" />
            </f:facet>
            <h:outputText value="#{p[6]}" />
        </p:column>
        
        <p:column>
            <f:facet name="header">
                <h:outputText value="Order status" />
            </f:facet>
            <h:outputText value="#{p[2]}" />
        </p:column>
            
        <p:column>
            <f:facet name="header">
                <h:outputText value="Actions" />
            </f:facet>
            <p:commandButton value="Cancel" 
                     action="#{orderListBB.cancelOrder(p[0])}"
                     update="form-table"
                     styleClass="ui-button-danger">
            <p:confirm message="Are you sure you want to cancel this order?" icon="pi pi-exclamation-triangle" />
            </p:commandButton>
        </p:column>
            

    </p:dataTable>
		
    </h:form>
        
<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
    <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" />
    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" />
</p:confirmDialog>
</h:body>
</html>